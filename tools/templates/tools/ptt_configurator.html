{% extends 'base.html' %}

{% block content %}
  <h1 class="page-header">Push To Talk Configurator</h1>
  <div>
    <h2 class="text-primary"><i class="fa fa-info"></i> Documentation</h2>
    <p>This tool configures user and device settings to support the Push to Talk service. It can be run on either a Service Provider or an Enterprise.
       When run on a Service Provider, a Group is required. When running on an Enterprise, a group is optional. <strong>If no group is provided, it is assumed that all groups
       require action within the Enterprise.</strong>
     </p>
    <h4>Summary of actions:</h4>
    <pre>
for each group:
  UserGetListInGroupRequest
  UserPushToTalkModifyRequest
  UserGetRequest19
  UserSharedCallAppearanceGetRequest16sp2
  for each device which has the user assigned:
      GroupAccessDeviceCustomTagGetListRequest
      tags = [
          {'tag_name': '%SK5-Action%', 'tag_value': '!grppark'},
          {'tag_name': '%SK5-Active%', 'tag_value': '1'},
          {'tag_name': '%SK5-Enable%', 'tag_value': '1'},
          {'tag_name': '%SK5-Label%', 'tag_value': 'Park'},
          {'tag_name': '%SK6-Action%', 'tag_value': '!retrieve'},
          {'tag_name': '%SK6-Enable%', 'tag_value': '1'},
          {'tag_name': '%SK6-Idle%', 'tag_value': '1'},
          {'tag_name': '%SK6-Label%', 'tag_value': 'Retrieve'},
      ]
      for each tag:
        GroupAccessDeviceCustomTagModifyRequest or GroupAccessDeviceCustomTagAddRequest
</pre>

    <h2 class="text-danger"><i class="fa fa-warning"></i> Invoke</h2>
    <div class="well">
      <form method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <p><label></label><input id="submit" type="submit" value="Run"/></p>
      </form>
    </div>
  </div>
{% endblock content %}

{% block javascript %}
  {{ block.super }}
  {% if form.javascript %}
    <script src="{{ form.javascript }}"></script>
  {% endif %}
{% endblock javascript %}
